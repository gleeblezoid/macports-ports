# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem              1.0
PortGroup               github 1.0

github.setup            pyenv pyenv 2.3.2 v
revision                0

categories              sysutils python devel
license                 MIT
maintainers             nomaintainer
supported_archs         noarch

description             Simple Python Version Management
long_description        pyenv lets you easily switch between multiple versions of Python.\
                        It is simple, unobtrusive, and follows the UNIX tradition of\
                        single-purpose tools that do one thing well.

github.tarball_from     archive
checksums               rmd160 28cb721fcd3d3fbdb95d44708e5d773e7bacab01 \
                        sha256 150ac8f7161c00e8e613bf5e273306f674b60037e3dace9c6bb7611dceb17144 \
                        size   713692

depends_lib-append \
                        port:openssl11 \
                        port:readline \
                        port:pkgconfig \
                        port:autoconf

# Configure script breaks when ccache enabled, and no benefit here anyway
configure.ccache        no
configure.cmd           src/configure
build.target            src

destroot {
    copy ${worksrcpath} ${destroot}${prefix}/bin/
}

post-destroot {
        set docdir ${prefix}/share/doc/${name}
        xinstall -d ${destroot}${docdir}
        xinstall -m 0644 -W ${worksrcpath} README.md \
            LICENSE ${destroot}${docdir}
    }

notes-append "
To configure your environment, add the following to your shell config file:
  export PYENV_ROOT='${prefix}/bin/${name}'
  eval \$(pyenv init -)
You may need to add pyenv to your path.
"
